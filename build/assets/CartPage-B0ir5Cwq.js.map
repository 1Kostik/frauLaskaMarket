{"version":3,"file":"CartPage-B0ir5Cwq.js","sources":["../../src/pages/CartPage/CartPage.styled.ts","../../src/pages/CartPage/CartPage.tsx"],"sourcesContent":["import { css } from \"@emotion/react\";\r\nimport styled from \"@emotion/styled\";\r\nimport { onDesktop, onTablet } from \"@styles/mixins\";\r\n\r\nexport const sectionCart = css`\r\n  padding: 24px 0px;\r\n  width: 100%;\r\n  background: var(--bg-black);\r\n`;\r\n\r\nexport const TitleContainer = styled.div`\r\n  width: 100%;\r\n  margin-bottom: 16px;\r\n  ${onTablet(css`\r\n    width: 312px;\r\n  `)};\r\n`;\r\n\r\nexport const H2 = styled.h2`\r\n  width: 100%;\r\n  color: var(--text-light-grey);\r\n  font-family: Fixel;\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n  line-height: 120%;\r\n  letter-spacing: 0.36px;\r\n\r\n  ${onDesktop(css`\r\n    font-size: 24px;\r\n    letter-spacing: 0.48px;\r\n  `)}\r\n`;\r\n\r\nexport const MainContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16px;\r\n  ${onDesktop(css`\r\n    flex-direction: unset;\r\n    gap: 20px;\r\n  `)};\r\n`;\r\n\r\nexport const ItemContainer = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  ${onTablet(css`\r\n    flex-direction: unset;\r\n    gap: 16px;\r\n  `)};\r\n  ${onDesktop(css`\r\n    width: 844px;\r\n    gap: 20px;\r\n  `)};\r\n`;\r\n\r\nexport const Wrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16px;\r\n  ${onDesktop(css`\r\n    gap: 20px;\r\n  `)};\r\n`;\r\n\r\nexport const MainInfoContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 24px;\r\n  ${onDesktop(css`\r\n    gap: 40px;\r\n  `)};\r\n`;\r\n","import HeroSection from \"@components/HeroSection/HeroSection\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useAppDispatch, useAppSelector } from \"../../redux/hooks\";\r\nimport { selectCart } from \"../../redux/cart/selectors\";\r\nimport {\r\n  decreaseQuantity,\r\n  increaseQuantity,\r\n  removeFromCart,\r\n} from \"../../redux/cart/slice\";\r\nimport { containerStyles } from \"@styles/variables\";\r\nimport {\r\n  H2,\r\n  ItemContainer,\r\n  MainContainer,\r\n  MainInfoContainer,\r\n  sectionCart,\r\n  TitleContainer,\r\n  Wrapper,\r\n} from \"./CartPage.styled\";\r\n\r\nimport {\r\n  ContainerTopSeller, \r\n} from \"@pages/ProductDetails/ProductDetails.styled\";\r\nimport { IAddedToCartProduct } from \"Interfaces/IAddedToCartProduct\";\r\nimport CartItemCard from \"@components/CartItemCard\";\r\nimport { nanoid } from \"nanoid\";\r\nimport PaymentBlock from \"@components/PaymentBlock\";\r\nimport { toast } from \"react-toastify\";\r\nimport TrendingProducts from \"@components/TrendingProducts/TrendingProducts\";\r\n\r\nconst CartPage = () => {\r\n  const dispatch = useAppDispatch();\r\n  const cart = useAppSelector(selectCart);\r\n\r\n  const [addedItems, setAddedItems] = useState<IAddedToCartProduct[]>([]);\r\n\r\n  useEffect(() => {\r\n    const updatedItems = cart.map(\r\n      ({\r\n        product_id,\r\n        title,\r\n        img,\r\n        product_code,\r\n        size,\r\n        discount,\r\n        price,\r\n        count,\r\n        color,\r\n        total_cost,\r\n        quantity,\r\n      }: IAddedToCartProduct) => ({\r\n        product_id,\r\n        title,\r\n        img,\r\n        product_code,\r\n        size,\r\n        discount,\r\n        price,\r\n        count,\r\n        color,\r\n        total_cost,\r\n        quantity,\r\n      })\r\n    );\r\n    setAddedItems(updatedItems);\r\n  }, [cart]);\r\n\r\n  const handleAddItem = (id: number, size?: number | null) => {\r\n    const addedItem = addedItems.find(\r\n      (item) => id === item.product_id && item.size === size\r\n    );\r\n    if (addedItem && addedItem.count >= addedItem.quantity) {\r\n      toast.warn(\"Товару на складі більше немає\");\r\n      return;\r\n    }\r\n    setAddedItems((prev) => {\r\n      return prev.map((item) => {\r\n        if (id === item.product_id && item.size === size) {\r\n          return {\r\n            ...item,\r\n            count: item.count + 1,\r\n          };\r\n        }\r\n        return item;\r\n      });\r\n    });\r\n    dispatch(increaseQuantity({ id, size }));\r\n  };\r\n\r\n  const handleDeleteItem = (id: number, size?: number | null) => {\r\n    setAddedItems((prev) => {\r\n      return prev.map((item) => {\r\n        if (id === item.product_id && item.size === size && item.count > 1) {\r\n          return {\r\n            ...item,\r\n            count: item.count - 1,\r\n          };\r\n        }\r\n        return item;\r\n      });\r\n    });\r\n    dispatch(decreaseQuantity({ id, size }));\r\n  };\r\n\r\n  const handleRemove = (\r\n    id: number,\r\n    size?: number | null,\r\n    color?: string | null\r\n  ) => {\r\n    setAddedItems((prev) => {\r\n      return prev.filter(\r\n        (item) =>\r\n          !(\r\n            item.product_id === id &&\r\n            item.size === size &&\r\n            item.color === color\r\n          )\r\n      );\r\n    });\r\n    dispatch(removeFromCart({ id, size, color }));\r\n  };\r\n\r\n  const title = addedItems.length !== 0 ? \"Кошик\" : \"Кошик порожній\";\r\n\r\n  return (\r\n    <>\r\n      <HeroSection viewType={\"other\"} isEmpty={addedItems.length === 0}>\r\n        {title}\r\n      </HeroSection>\r\n      <section css={sectionCart}>\r\n        <div css={containerStyles}>\r\n          {addedItems.length > 0 ? (\r\n            <MainContainer>\r\n              <MainInfoContainer>\r\n                <ItemContainer>\r\n                  <TitleContainer>\r\n                    <H2>Товари у кошику</H2>\r\n                  </TitleContainer>\r\n                  <Wrapper>\r\n                    {addedItems.map((item) => (\r\n                      <CartItemCard\r\n                        key={nanoid()}\r\n                        item={item}\r\n                        handleAddItem={handleAddItem}\r\n                        handleDeleteItem={handleDeleteItem}\r\n                        handleRemove={handleRemove}\r\n                      />\r\n                    ))}\r\n                  </Wrapper>\r\n                </ItemContainer>\r\n              </MainInfoContainer>\r\n              <PaymentBlock />\r\n            </MainContainer>\r\n          ) : (\r\n            <>\r\n              <ContainerTopSeller>\r\n                <TrendingProducts />\r\n              </ContainerTopSeller>\r\n            </>\r\n          )}\r\n        </div>\r\n      </section>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CartPage;\r\n"],"names":["sectionCart","css","TitleContainer","styled","onTablet","H2","onDesktop","MainContainer","ItemContainer","Wrapper","MainInfoContainer","CartPage","dispatch","useAppDispatch","cart","useAppSelector","selectCart","addedItems","setAddedItems","useState","useEffect","updatedItems","product_id","title","img","product_code","size","discount","price","count","color","total_cost","quantity","handleAddItem","id","addedItem","item","toast","prev","increaseQuantity","handleDeleteItem","decreaseQuantity","handleRemove","removeFromCart","jsxs","Fragment","jsx","HeroSection","containerStyles","CartItemCard","nanoid","PaymentBlock","ContainerTopSeller","TrendingProducts"],"mappings":"qhBAIO,MAAMA,EAAcC;AAAA;AAAA;AAAA;AAAA,EAMdC,EAAiBC,EAAO;AAAA;AAAA;AAAA,IAGjCC,EAASH;AAAA;AAAA,GAEV,CAAC;AAAA,EAGSI,EAAKF,EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IASrBG,EAAUL;AAAA;AAAA;AAAA,GAGX,CAAC;AAAA,EAGSM,EAAgBJ,EAAO;AAAA;AAAA;AAAA;AAAA,IAIhCG,EAAUL;AAAA;AAAA;AAAA,GAGX,CAAC;AAAA,EAGSO,EAAgBL,EAAO;AAAA;AAAA;AAAA;AAAA,IAIhCC,EAASH;AAAA;AAAA;AAAA,GAGV,CAAC;AAAA,IACAK,EAAUL;AAAA;AAAA;AAAA,GAGX,CAAC;AAAA,EAGSQ,EAAUN,EAAO;AAAA;AAAA;AAAA;AAAA,IAI1BG,EAAUL;AAAA;AAAA,GAEX,CAAC;AAAA,EAGSS,EAAoBP,EAAO;AAAA;AAAA;AAAA;AAAA,IAIpCG,EAAUL;AAAA;AAAA,GAEX,CAAC;AAAA,EC1CEU,GAAW,IAAM,CACrB,MAAMC,EAAWC,IACXC,EAAOC,EAAeC,CAAU,EAEhC,CAACC,EAAYC,CAAa,EAAIC,EAAA,SAAgC,CAAE,CAAA,EAEtEC,EAAAA,UAAU,IAAM,CACd,MAAMC,EAAeP,EAAK,IACxB,CAAC,CACC,WAAAQ,EACA,MAAAC,EACA,IAAAC,EACA,aAAAC,EACA,KAAAC,EACA,SAAAC,EACA,MAAAC,EACA,MAAAC,EACA,MAAAC,EACA,WAAAC,EACA,SAAAC,CAAA,KAC0B,CAC1B,WAAAV,EACA,MAAAC,EACA,IAAAC,EACA,aAAAC,EACA,KAAAC,EACA,SAAAC,EACA,MAAAC,EACA,MAAAC,EACA,MAAAC,EACA,WAAAC,EACA,SAAAC,CAAA,EACF,EAEFd,EAAcG,CAAY,CAAA,EACzB,CAACP,CAAI,CAAC,EAEH,MAAAmB,EAAgB,CAACC,EAAYR,IAAyB,CAC1D,MAAMS,EAAYlB,EAAW,KAC1BmB,GAASF,IAAOE,EAAK,YAAcA,EAAK,OAASV,CAAA,EAEpD,GAAIS,GAAaA,EAAU,OAASA,EAAU,SAAU,CACtDE,EAAM,KAAK,+BAA+B,EAC1C,MACF,CACAnB,EAAeoB,GACNA,EAAK,IAAKF,GACXF,IAAOE,EAAK,YAAcA,EAAK,OAASV,EACnC,CACL,GAAGU,EACH,MAAOA,EAAK,MAAQ,CAAA,EAGjBA,CACR,CACF,EACDxB,EAAS2B,EAAiB,CAAE,GAAAL,EAAI,KAAAR,CAAA,CAAM,CAAC,CAAA,EAGnCc,EAAmB,CAACN,EAAYR,IAAyB,CAC7DR,EAAeoB,GACNA,EAAK,IAAKF,GACXF,IAAOE,EAAK,YAAcA,EAAK,OAASV,GAAQU,EAAK,MAAQ,EACxD,CACL,GAAGA,EACH,MAAOA,EAAK,MAAQ,CAAA,EAGjBA,CACR,CACF,EACDxB,EAAS6B,EAAiB,CAAE,GAAAP,EAAI,KAAAR,CAAA,CAAM,CAAC,CAAA,EAGnCgB,EAAe,CACnBR,EACAR,EACAI,IACG,CACHZ,EAAeoB,GACNA,EAAK,OACTF,GACC,EACEA,EAAK,aAAeF,GACpBE,EAAK,OAASV,GACdU,EAAK,QAAUN,EAAA,CAGtB,EACDlB,EAAS+B,EAAe,CAAE,GAAAT,EAAI,KAAAR,EAAM,MAAAI,CAAO,CAAA,CAAC,CAAA,EAGxCP,EAAQN,EAAW,SAAW,EAAI,QAAU,iBAElD,OAEI2B,EAAAC,EAAA,CAAA,SAAA,CAAAC,EAACC,GAAY,SAAU,QAAS,QAAS9B,EAAW,SAAW,EAC5D,SACHM,CAAA,CAAA,EACCuB,EAAA,UAAA,CAAQ,IAAK9C,EACZ,SAAC8C,EAAA,MAAA,CAAI,IAAKE,EACP,SAAW/B,EAAA,OAAS,EACnB2B,EAACrC,EACC,CAAA,SAAA,CAACuC,EAAApC,EAAA,CACC,WAACF,EACC,CAAA,SAAA,CAAAsC,EAAC5C,EACC,CAAA,SAAA4C,EAACzC,EAAG,CAAA,SAAA,iBAAe,CAAA,EACrB,EACCyC,EAAArC,EAAA,CACE,SAAWQ,EAAA,IAAKmB,GACfU,EAACG,EAAA,CAEC,KAAAb,EACA,cAAAH,EACA,iBAAAO,EACA,aAAAE,CAAA,EAJKQ,EAAO,CAMf,CAAA,EACH,CAAA,CAAA,CACF,CACF,CAAA,IACCC,EAAa,EAAA,CAAA,CAChB,CAAA,OAGE,SAACL,EAAAM,EAAA,CACC,WAACC,EAAiB,CAAA,CAAA,CACpB,CAAA,CACF,CAAA,CAEJ,CAAA,EACF,CACF,CAAA,CAAA,CAEJ"}